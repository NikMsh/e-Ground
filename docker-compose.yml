version: "3.7"

services:
  processor:
    build:
      context: .
      dockerfile: Dockerfile
    image: processor:latest
    container_name: processor
    environment:
      - CATALOG_HOST=http://catalog
      - CATALOG_PORT=8082
      - CUSTOMER_MANAGEMENT_HOST=http://customer-management
      - CUSTOMER_MANAGEMENT_PORT=8086
      - FAVOURITE_ITEM_MANAGEMENT_HOST=http://favourite-item-management
      - FAVOURITE_ITEM_MANAGEMENT_PORT=8083
    ports:
      - 9090:8080
    restart: on-failure